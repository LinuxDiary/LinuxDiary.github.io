<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>安装 | 个人文档库</title>
    <meta name="generator" content="VuePress 1.9.8">
    
    <meta name="description" content="运维知识文档">
    
    <link rel="preload" href="/assets/css/0.styles.86682925.css" as="style"><link rel="preload" href="/assets/js/app.6ea617b8.js" as="script"><link rel="preload" href="/assets/js/2.6e381248.js" as="script"><link rel="preload" href="/assets/js/69.7a2f9a81.js" as="script"><link rel="prefetch" href="/assets/js/10.dd27a2bb.js"><link rel="prefetch" href="/assets/js/11.ec440828.js"><link rel="prefetch" href="/assets/js/12.c67fbef0.js"><link rel="prefetch" href="/assets/js/13.a53b31f6.js"><link rel="prefetch" href="/assets/js/14.fac02fcf.js"><link rel="prefetch" href="/assets/js/15.366e462e.js"><link rel="prefetch" href="/assets/js/16.ae609dff.js"><link rel="prefetch" href="/assets/js/17.7976f036.js"><link rel="prefetch" href="/assets/js/18.3f258419.js"><link rel="prefetch" href="/assets/js/19.0ad2626e.js"><link rel="prefetch" href="/assets/js/20.bdf3dbe2.js"><link rel="prefetch" href="/assets/js/21.04180477.js"><link rel="prefetch" href="/assets/js/22.f4cf519a.js"><link rel="prefetch" href="/assets/js/23.9e5b52cd.js"><link rel="prefetch" href="/assets/js/24.b0159ef8.js"><link rel="prefetch" href="/assets/js/25.e38d986a.js"><link rel="prefetch" href="/assets/js/26.b44e8359.js"><link rel="prefetch" href="/assets/js/27.164897ca.js"><link rel="prefetch" href="/assets/js/28.30c3dcb6.js"><link rel="prefetch" href="/assets/js/29.0ea1763d.js"><link rel="prefetch" href="/assets/js/3.87c14ff3.js"><link rel="prefetch" href="/assets/js/30.b6b9f227.js"><link rel="prefetch" href="/assets/js/31.d7d6e5fa.js"><link rel="prefetch" href="/assets/js/32.a71c64f7.js"><link rel="prefetch" href="/assets/js/33.6e421306.js"><link rel="prefetch" href="/assets/js/34.0f46b74a.js"><link rel="prefetch" href="/assets/js/35.1d02fd3c.js"><link rel="prefetch" href="/assets/js/36.fc5cc9cb.js"><link rel="prefetch" href="/assets/js/37.af7e5661.js"><link rel="prefetch" href="/assets/js/38.cdd11312.js"><link rel="prefetch" href="/assets/js/39.30bb1d36.js"><link rel="prefetch" href="/assets/js/4.91553c08.js"><link rel="prefetch" href="/assets/js/40.c4740fee.js"><link rel="prefetch" href="/assets/js/41.37a38f62.js"><link rel="prefetch" href="/assets/js/42.df5bcbd7.js"><link rel="prefetch" href="/assets/js/43.0c0ab294.js"><link rel="prefetch" href="/assets/js/44.1dcaa2ac.js"><link rel="prefetch" href="/assets/js/45.c3b4bbca.js"><link rel="prefetch" href="/assets/js/46.7659ce01.js"><link rel="prefetch" href="/assets/js/47.d6eb360d.js"><link rel="prefetch" href="/assets/js/48.ca9d607b.js"><link rel="prefetch" href="/assets/js/49.8c09eac0.js"><link rel="prefetch" href="/assets/js/5.6d5ca1ce.js"><link rel="prefetch" href="/assets/js/50.3694eddb.js"><link rel="prefetch" href="/assets/js/51.0868c6f4.js"><link rel="prefetch" href="/assets/js/52.513df7cc.js"><link rel="prefetch" href="/assets/js/53.9dcabf12.js"><link rel="prefetch" href="/assets/js/54.70a6c075.js"><link rel="prefetch" href="/assets/js/55.a1d14f80.js"><link rel="prefetch" href="/assets/js/56.7029bd26.js"><link rel="prefetch" href="/assets/js/57.1b116307.js"><link rel="prefetch" href="/assets/js/58.bb74acae.js"><link rel="prefetch" href="/assets/js/59.610e7d4f.js"><link rel="prefetch" href="/assets/js/6.ee71a04b.js"><link rel="prefetch" href="/assets/js/60.98e611f4.js"><link rel="prefetch" href="/assets/js/61.05109453.js"><link rel="prefetch" href="/assets/js/62.f4adfb83.js"><link rel="prefetch" href="/assets/js/63.b63e1591.js"><link rel="prefetch" href="/assets/js/64.1235f2bd.js"><link rel="prefetch" href="/assets/js/65.bfa7cab9.js"><link rel="prefetch" href="/assets/js/66.2574fbb1.js"><link rel="prefetch" href="/assets/js/67.09935f72.js"><link rel="prefetch" href="/assets/js/68.af1ee108.js"><link rel="prefetch" href="/assets/js/7.ed4c5699.js"><link rel="prefetch" href="/assets/js/70.605c490c.js"><link rel="prefetch" href="/assets/js/8.c8b45379.js"><link rel="prefetch" href="/assets/js/9.9d028748.js">
    <link rel="stylesheet" href="/assets/css/0.styles.86682925.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">个人文档库</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="http://www.linuxd.cc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  HOLA
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/LinuxDiary/scripts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  脚本
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="http://www.linuxd.cc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  HOLA
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/LinuxDiary/scripts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  脚本
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CentOS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/CentOS/boot_order.html" class="sidebar-link">启动顺序</a></li><li><a href="/CentOS/system_initialization.html" class="sidebar-link">系统常用配置</a></li><li><a href="/CentOS/yum.html" class="sidebar-link">yum命令</a></li><li><a href="/CentOS/rpm.html" class="sidebar-link">rpm命令</a></li><li><a href="/CentOS/date_command_opstions.html" class="sidebar-link">date命令选项</a></li><li><a href="/CentOS/system_logs.html" class="sidebar-link">系统日志说明</a></li><li><a href="/CentOS/grep_sed_awk.html" class="sidebar-link">grep sed awk</a></li><li><a href="/CentOS/file_descriptor.html" class="sidebar-link">文件描述符</a></li><li><a href="/CentOS/stdin_stdout_stderr.html" class="sidebar-link">输入输出重定向</a></li><li><a href="/CentOS/iptables.html" class="sidebar-link">iptables</a></li><li><a href="/CentOS/sysctl.html" class="sidebar-link">sysctl基本优化</a></li><li><a href="/CentOS/load_balance.html" class="sidebar-link">双网卡绑定和负载均衡</a></li><li><a href="/CentOS/lvm.html" class="sidebar-link">lvm管理</a></li><li><a href="/CentOS/sendmail.html" class="sidebar-link">sendmail</a></li><li><a href="/CentOS/dns_server.html" class="sidebar-link">DNS Sever</a></li><li><a href="/CentOS/ftp_server.html" class="sidebar-link">FTP Sever</a></li><li><a href="/CentOS/nfs_server.html" class="sidebar-link">NFS Server</a></li><li><a href="/CentOS/ntp_server.html" class="sidebar-link">NTP Sever</a></li><li><a href="/CentOS/lsyncd.html" class="sidebar-link">lsyncd</a></li><li><a href="/CentOS/kvm_virtulization_deploy.html" class="sidebar-link">KVM</a></li><li><a href="/CentOS/vmware_extend_disk.html" class="sidebar-link">VMware虚拟机扩展磁盘容量</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Docker</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Docker/docker_app.html" class="sidebar-link">Docker应用</a></li><li><a href="/Docker/docker_compose_app.html" class="sidebar-link">Docker-Compose应用</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Nginx</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Nginx/" class="sidebar-link">介绍</a></li><li><a href="/Nginx/nginx_install.html" class="sidebar-link">安装</a></li><li><a href="/Nginx/nginx_config_files.html" class="sidebar-link">配置文件</a></li><li><a href="/Nginx/nginx_proxy.html" class="sidebar-link">反向代理</a></li><li><a href="/Nginx/nginx_max_clients.html" class="sidebar-link">并发数</a></li><li><a href="/Nginx/linux_optimization_for_nginx.html" class="sidebar-link">内核调优</a></li><li><a href="/Nginx/nginx_php_fpm.html" class="sidebar-link">使用PHP-FPM</a></li><li><a href="/Nginx/keepalived_nginx.html" class="sidebar-link">Keepalived + Nginx</a></li><li><a href="/Nginx/configs.html" class="sidebar-link">常用配置</a></li><li><a href="/Nginx/nginx_log_scripts.html" class="sidebar-link">nginx日志分析</a></li><li><a href="/Nginx/http_code.html" class="sidebar-link">HTTP状态码</a></li><li><a href="/Nginx/error_handle.html" class="sidebar-link">常见错误处理</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>MySQL</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/MySQL/" class="sidebar-link">介绍</a></li><li><a href="/MySQL/mysql_installation.html" class="sidebar-link">安装</a></li><li><a href="/MySQL/variables.html" class="sidebar-link">参数</a></li><li><a href="/MySQL/command.html" class="sidebar-link">命令</a></li><li><a href="/MySQL/sql.html" class="sidebar-link">SQL</a></li><li><a href="/MySQL/mysql_scripts.html" class="sidebar-link">脚本</a></li><li><a href="/MySQL/log.html" class="sidebar-link">日志分类</a></li><li><a href="/MySQL/reset_password.html" class="sidebar-link">重置密码</a></li><li><a href="/MySQL/backup.html" class="sidebar-link">备份与恢复</a></li><li><a href="/MySQL/duplication.html" class="sidebar-link">主从复制</a></li><li><a href="/MySQL/optimization.html" class="sidebar-link">运行环境优化</a></li><li><a href="/MySQL/tools.html" class="sidebar-link">实时监控工具</a></li><li><a href="/MySQL/error_code.html" class="sidebar-link">常见错误代码</a></li><li><a href="/MySQL/errors.html" class="sidebar-link">错误处理</a></li><li><a href="/MySQL/innodb.html" class="sidebar-link">InnoDB特性</a></li><li><a href="/MySQL/duplication_case.html" class="sidebar-link">迁移案例</a></li><li><a href="/MySQL/mysql_innodb_cluster.html" class="sidebar-link">MySQL innodb cluster</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Python</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Python/install_python.html" aria-current="page" class="active sidebar-link">安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Python/install_python.html#依赖" class="sidebar-link">依赖</a></li><li class="sidebar-sub-header"><a href="/Python/install_python.html#编译" class="sidebar-link">编译</a></li><li class="sidebar-sub-header"><a href="/Python/install_python.html#虚拟环境" class="sidebar-link">虚拟环境</a></li><li class="sidebar-sub-header"><a href="/Python/install_python.html#一些技巧" class="sidebar-link">一些技巧</a></li></ul></li><li><a href="/Python/django_deployment.html" class="sidebar-link">Django项目部署</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Others</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Others/ffmpeg.html" class="sidebar-link">ffmpeg</a></li><li><a href="/Others/mac_tips.html" class="sidebar-link">Mac技巧</a></li><li><a href="/Others/raid_level.html" class="sidebar-link">Raid级别</a></li><li><a href="/Others/servers.html" class="sidebar-link">服务器规划</a></li><li><a href="/Others/memcached.html" class="sidebar-link">Memcached基础</a></li><li><a href="/Others/tomcat_deploy.html" class="sidebar-link">Tomcat部署</a></li><li><a href="/Others/tcp_handshake.html" class="sidebar-link">TCP三次握手四次挥手</a></li><li><a href="/Others/aria2_filebrowser.html" class="sidebar-link">Aria2 离线下载</a></li><li><a href="/Others/word_page_num.html" class="sidebar-link">Word页码编排</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h1> <ul><li>系统环境： CentOS 7</li> <li>Python版本： Python 3.6.6</li></ul> <h2 id="依赖"><a href="#依赖" class="header-anchor">#</a> 依赖</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>yum <span class="token parameter variable">-y</span> <span class="token function">install</span> zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel libffi-devel gcc <span class="token function">make</span> <span class="token function">git</span>
</code></pre></div><h2 id="编译"><a href="#编译" class="header-anchor">#</a> 编译</h2> <p>编译安装，这里不指定 <code>Python 3</code> 的安装路径，编译时不带参数，且在 <code>root</code> 权限下进行安装。这样配置的目的是让其他程序能够找得到 <code>Python 3</code> 的 <code>lib</code> 文件和 <code>include</code> 文件，例如在安装 <code>mysqlclient</code> 时就需要使用到这些文件，如果指定了安装路径，将可能出现找不到库文件的错误</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">wget</span> https://www.python.org/ftp/python/3.6.6/Python-3.6.6.tar.xz
<span class="token function">tar</span> xf python-3.6.6.tar.xz
<span class="token builtin class-name">cd</span> python-3.6.6
./configure --enable-optimizations

<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre></div><h2 id="虚拟环境"><a href="#虚拟环境" class="header-anchor">#</a> 虚拟环境</h2> <h3 id="virtualenvwrapper"><a href="#virtualenvwrapper" class="header-anchor">#</a> virtualenvwrapper</h3> <p>安装 <code>virtualenvwrapper</code> <code>，CentOS</code> 上默认自带 <code>Python 2.7</code> ，这里使用 <code>pip</code> 的时候需要确认一下是 <code>Python 3</code> 的 <code>pip</code> ，只有这样， <code>pip</code> 才会将包安装到 <code>Python 3</code> 的包目录中</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ pip <span class="token parameter variable">-V</span>
pip <span class="token number">18.0</span> from /usr/local/lib/python3.6/site-packages/pip <span class="token punctuation">(</span>python <span class="token number">3.6</span><span class="token punctuation">)</span>
</code></pre></div><p>全局安装</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> pip <span class="token function">install</span> virtualenvwrapper
</code></pre></div><p><code>pip</code> 安装默认使用的官方源，速度可能很慢，可以在安装时指定国内 <code>pypi</code> 源</p> <div class="language- extra-class"><pre class="language-text"><code>$ sudo pip install virtualenvwrapper -i https://mirrors.aliyun.com/pypi/simple
</code></pre></div><p>也可以修改默认源</p> <div class="language- extra-class"><pre class="language-text"><code>$ vi ~/.pip/pip.conf
[global]
index-url = https://mirrors.aliyun.com/pypi/simple/

[install]
trusted-host=mirrors.aliyun.com
</code></pre></div><p>配置环境变量， <code>WORKON_HOME</code> 是虚拟环境根目录， <code>VIRTUALENVWRAPPER_PYTHON</code> 指定了使用哪个 <code>Python</code> 程序来创建虚拟环境， <code>source virtualenvwrapper.sh</code> 的目的是加载 <code>mkvirtualenv</code> <code>rmvirtualenv</code> <code>workon</code> 等命令，编辑并重载 <code>~/.bashrc</code> 文件</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">WORKON_HOME</span><span class="token operator">=</span><span class="token environment constant">$HOME</span>/.local
<span class="token builtin class-name">export</span> <span class="token assign-left variable">VIRTUALENVWRAPPER_PYTHON</span><span class="token operator">=</span>/usr/local/bin/python3
<span class="token builtin class-name">source</span> /usr/local/bin/virtualenvwrapper.sh
</code></pre></div><p>编辑完成之后重新加载一下 <code>~/.bashrc</code></p> <p>常用命令</p> <ul><li>mkvirtualenv: 在虚拟环境根目录 WORKON_HOME 下创建虚拟环境</li> <li>rmvirtualenv: 删除虚拟环境</li> <li>workon: 列出或切换到指定虚拟环境</li> <li>deactivate: 退出虚拟环境</li></ul> <p>切换到虚拟环境后，会出现类似如下提示符</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">(</span>venv_django_11<span class="token punctuation">)</span> <span class="token punctuation">[</span>www@localhost python<span class="token punctuation">]</span>$
</code></pre></div><p>在该环境下使用 <code>pip</code> 安装的包都只属于虚拟环境，虚拟环境之间相互独立。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>在 <code>~/.bashrc</code> 或 <code>~/.zshrc</code> 中添加以下内容可以实现 <code>pip</code> 命令自动补全</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">eval</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">`</span>pip completion <span class="token parameter variable">--zsh</span><span class="token variable">`</span></span>&quot;</span>  <span class="token comment">## .zshrc</span>
<span class="token builtin class-name">eval</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">`</span>pip completion <span class="token parameter variable">--bash</span><span class="token variable">`</span></span>&quot;</span>  <span class="token comment">## .bashrc</span>
</code></pre></div></div> <h3 id="pipenv"><a href="#pipenv" class="header-anchor">#</a> pipenv</h3> <p>首先确认 <code>pip</code> 的位置</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ pip <span class="token parameter variable">-V</span>
pip <span class="token number">18.0</span> from /usr/local/lib/python3.6/site-packages/pip <span class="token punctuation">(</span>python <span class="token number">3.6</span><span class="token punctuation">)</span>
</code></pre></div><p>全局安装 <code>pipenv</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> pip <span class="token function">install</span> pipenv
</code></pre></div><p>切到项目目录下，直接运行 <code>pipenv shell</code> 命令，会自动创建虚拟环境</p> <div class="language- extra-class"><pre class="language-text"><code>Creating a virtualenv for this project…
Pipfile: /home/nginx/u01/hola/Pipfile
Using /usr/local/bin/python3 (3.6.6) to create virtualenv…
⠙ Creating virtual environment...Using base prefix '/usr/local'
New python executable in /home/nginx/.local/share/virtualenvs/hola-2pee34yt/bin/python3
Also creating executable in /home/nginx/.local/share/virtualenvs/hola-2pee34yt/bin/python
Installing setuptools, pip, wheel...
done.
Running virtualenv with interpreter /usr/local/bin/python3

✔ Successfully created virtual environment!
</code></pre></div><p>如果需要更换 <code>pip</code> 源，可以编辑 <code>Pipfile</code> 文件</p> <div class="language- extra-class"><pre class="language-text"><code>url = &quot;https://pypi.doubanio.com/simple/&quot;
</code></pre></div><p>常用命令</p> <ul><li>install 安装程序包，并自动绑定包依赖关系</li> <li>uninstall 解除安装，解绑依赖关系</li> <li>shell 在当前目录下启动虚拟环境</li> <li>graph 查看包依赖关系</li> <li>clean 删除不在 Pipfile.lock 中的包</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>pipenv 可能存在一些小 bug 或者不兼容性，例如在安装 <code>mysqlclient</code> 时，可以成功安装，但是在 <code>runserver</code> 时总是提示找不到 <code>Did you install mysqlclient?</code> ，但是如果使用 <code>pip install mysqlclient</code> 安装就没有问题</p></div> <h2 id="一些技巧"><a href="#一些技巧" class="header-anchor">#</a> 一些技巧</h2> <h3 id="autoenv"><a href="#autoenv" class="header-anchor">#</a> autoenv</h3> <p>autoenv 可以帮助我们在切换到项目目录时自动加载虚拟环境，首先需要全局安装</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> pip <span class="token function">install</span> autoenv
</code></pre></div><p>然后编辑 <code>~/.bashrc</code> 文件，追加以下内容，然后重载一下 <code>~/.bashrc</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">source</span> <span class="token variable"><span class="token variable">`</span><span class="token function">which</span> activate.sh<span class="token variable">`</span></span>
</code></pre></div><p>然后进入到项目根目录下，创建 <code>.env</code> 文件，追加进入虚拟环境命令，如果使用的是 <code>virtualenvwrapper</code> ，则追加以下内容，<code>test</code> 是创建的虚拟环境名称</p> <div class="language- extra-class"><pre class="language-text"><code>workon test
</code></pre></div><h3 id="mysqlclient安装"><a href="#mysqlclient安装" class="header-anchor">#</a> mysqlclient安装</h3> <p>在安装 <code>mysqlclient</code> 时经常会报错，主要有两种错误(环境是 CentOS 7)</p> <div class="language- extra-class"><pre class="language-text"><code>OSError: mysql_config not found
</code></pre></div><p>解决该问题需要安装 MySQL 开发包，比如 CentOS 下可以安装以下包，到官网选择合适的版本</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> https://dev.mysql.com/get/Downloads/MySQL-5.6/MySQL-devel-5.6.42-1.el7.x86_64.rpm
</code></pre></div><p>解决了上述问题，还可能出现如下问题</p> <div class="language- extra-class"><pre class="language-text"><code>...
/bin/ld: cannot find -lmysqlclient'
...
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>django.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module.
Did you install mysqlclient?
</code></pre></div><p>意思是找不到 MySQL 的客户端连接库文件，例如 <code>/usr/lib64/libmysqlclient.so.18</code> 文件，此时需要安装 MySQL 另外一个包 <code>MySQL-shared</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> https://dev.mysql.com/get/Downloads/MySQL-5.6/MySQL-shared-5.6.42-1.el7.x86_64.rpm
</code></pre></div><p>重新安装 <code>mysqlclient</code></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/MySQL/mysql_innodb_cluster.html" class="prev">
        MySQL innodb cluster
      </a></span> <span class="next"><a href="/Python/django_deployment.html">
        Django项目部署
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6ea617b8.js" defer></script><script src="/assets/js/2.6e381248.js" defer></script><script src="/assets/js/69.7a2f9a81.js" defer></script>
  </body>
</html>
