(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{216:function(s,t,a){"use strict";a.r(t);var n=a(6),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"grep-sed-awk"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#grep-sed-awk"}},[s._v("#")]),s._v(" grep sed awk")]),s._v(" "),t("h2",{attrs:{id:"正则表达式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#正则表达式"}},[s._v("#")]),s._v(" 正则表达式")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("正则符号")]),s._v(" "),t("th",[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("^")]),s._v(" "),t("td",[s._v("行起始标记")])]),s._v(" "),t("tr",[t("td",[s._v("$")]),s._v(" "),t("td",[s._v("行结尾标记")])]),s._v(" "),t("tr",[t("td",[s._v(".")]),s._v(" "),t("td",[s._v("匹配除了换行符( "),t("code",[s._v("\\n \\r")]),s._v(" )以外的任意 "),t("code",[s._v("1")]),s._v(" 个字符")])]),s._v(" "),t("tr",[t("td",[s._v("[]")]),s._v(" "),t("td",[s._v("匹配包含在 [字符] 之中的任意一个字符")])]),s._v(" "),t("tr",[t("td",[s._v("[^]")]),s._v(" "),t("td",[s._v("匹配除 [^字符] 之外的任意一个字符")])]),s._v(" "),t("tr",[t("td",[s._v("[-]")]),s._v(" "),t("td",[s._v("匹配 [] 中指定范围内的任意一个字符")])]),s._v(" "),t("tr",[t("td",[s._v("?")]),s._v(" "),t("td",[s._v("匹配之前的项 "),t("code",[s._v("1")]),s._v(" 次或 "),t("code",[s._v("0")]),s._v(" 次")])]),s._v(" "),t("tr",[t("td",[s._v("+")]),s._v(" "),t("td",[s._v("匹配之前的项 "),t("code",[s._v("1")]),s._v(" 次或多次")])]),s._v(" "),t("tr",[t("td",[s._v("*")]),s._v(" "),t("td",[s._v("匹配之前的项 "),t("code",[s._v("0")]),s._v(" 次或多次")])]),s._v(" "),t("tr",[t("td",[s._v("()")]),s._v(" "),t("td",[s._v("匹配 "),t("code",[s._v("()")]),s._v(" 中的字符串")])]),s._v(" "),t("tr",[t("td",[s._v("{n}")]),s._v(" "),t("td",[s._v("匹配之前的项 "),t("code",[s._v("n")]),s._v(" 次")])]),s._v(" "),t("tr",[t("td",[s._v("{n,}")]),s._v(" "),t("td",[s._v("之前的项至少需要匹配 "),t("code",[s._v("n")]),s._v(" 次")])]),s._v(" "),t("tr",[t("td",[s._v("{n,m}")]),s._v(" "),t("td",[s._v("指定之前的项所必需匹配的最小次数和最大次数")])]),s._v(" "),t("tr",[t("td",[s._v("\\")]),s._v(" "),t("td",[s._v("转义符")])]),s._v(" "),t("tr",[t("td",[s._v("\\f")]),s._v(" "),t("td",[s._v("匹配一个换页符")])]),s._v(" "),t("tr",[t("td",[s._v("\\n")]),s._v(" "),t("td",[s._v("匹配一个换行符")])]),s._v(" "),t("tr",[t("td",[s._v("\\r")]),s._v(" "),t("td",[s._v("匹配一个回车符")])]),s._v(" "),t("tr",[t("td",[s._v("\\t")]),s._v(" "),t("td",[s._v("匹配一个制表符")])]),s._v(" "),t("tr",[t("td",[s._v("\\v")]),s._v(" "),t("td",[s._v("匹配一个垂直制表符")])]),s._v(" "),t("tr",[t("td",[s._v("\\b")]),s._v(" "),t("td",[s._v("匹配单词的边界，"),t("code",[s._v("er\\b")]),s._v(" 可匹配 "),t("code",[s._v("never")]),s._v(" 中的 "),t("code",[s._v("er")]),s._v(" ，不能匹配 "),t("code",[s._v("verb")]),s._v(" 中的 "),t("code",[s._v("er")])])]),s._v(" "),t("tr",[t("td",[s._v("\\B")]),s._v(" "),t("td",[t("code",[s._v("er\\B")]),s._v(" 可匹配 "),t("code",[s._v("verb")]),s._v(" 中的 "),t("code",[s._v("er")]),s._v(" ，不可匹配 "),t("code",[s._v("never")]),s._v(" 中的 "),t("code",[s._v("er")])])]),s._v(" "),t("tr",[t("td",[s._v("\\d")]),s._v(" "),t("td",[s._v("匹配数字，相当于[0-9]")])]),s._v(" "),t("tr",[t("td",[s._v("\\D")]),s._v(" "),t("td",[s._v("匹配非数字，相当于[^0-9]")])]),s._v(" "),t("tr",[t("td",[s._v("\\s")]),s._v(" "),t("td",[s._v("匹配任何空白符，相当于[ \\f\\n\\r\\t\\v]")])]),s._v(" "),t("tr",[t("td",[s._v("\\S")]),s._v(" "),t("td",[s._v("匹配任何非空白符，相当于[^ \\f\\n\\r\\t\\v]")])]),s._v(" "),t("tr",[t("td",[s._v("\\w")]),s._v(" "),t("td",[s._v("匹配字母、数字、下划线，相当于[a-zA-Z0-9_]")])]),s._v(" "),t("tr",[t("td",[s._v("\\W")]),s._v(" "),t("td",[s._v("匹配非字母、数字、下划线，相当于[^a-zA-Z0-9_]")])])])]),s._v(" "),t("h2",{attrs:{id:"grep"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#grep"}},[s._v("#")]),s._v(" grep")]),s._v(" "),t("p",[t("code",[s._v("grep(Global regular expression and print)")]),s._v(" ，命令行搜索工具，有多种匹配模式，可以对文本及文件进行搜索匹配，不会修改输入文本或文件的内容。")]),s._v(" "),t("h3",{attrs:{id:"常用参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用参数"}},[s._v("#")]),s._v(" 常用参数")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("参数")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("-c")]),s._v(" "),t("td",[s._v("只输出匹配到的行的数量")])]),s._v(" "),t("tr",[t("td",[s._v("-e")]),s._v(" "),t("td",[s._v("多个匹配模式查找")])]),s._v(" "),t("tr",[t("td",[s._v("-E")]),s._v(" "),t("td",[s._v("支持正则表达式匹配，相当于 "),t("code",[s._v("egrep")])])]),s._v(" "),t("tr",[t("td",[s._v("-f")]),s._v(" "),t("td",[s._v("从文件中读取匹配模式(可以包含多个匹配模式)")])]),s._v(" "),t("tr",[t("td",[s._v("-h")]),s._v(" "),t("td",[s._v("查询多个文件时，不显示文件名前缀")])]),s._v(" "),t("tr",[t("td",[s._v("-i")]),s._v(" "),t("td",[s._v("大小写不敏感匹配")])]),s._v(" "),t("tr",[t("td",[s._v("-q")]),s._v(" "),t("td",[s._v("命令静默执行，没有输出，如果匹配到，状态码为 "),t("code",[s._v("0")]),s._v(" ，如果没有匹配到，状态码为 "),t("code",[s._v("1")])])]),s._v(" "),t("tr",[t("td",[s._v("-l")]),s._v(" "),t("td",[s._v("输出匹配到的文件列表")])]),s._v(" "),t("tr",[t("td",[s._v("-L")]),s._v(" "),t("td",[s._v("输出没有匹配到的文件列表")])]),s._v(" "),t("tr",[t("td",[s._v("-n")]),s._v(" "),t("td",[s._v("输出时打印行号")])]),s._v(" "),t("tr",[t("td",[s._v("-o")]),s._v(" "),t("td",[s._v("只输出匹配到的部分")])]),s._v(" "),t("tr",[t("td",[s._v("-v")]),s._v(" "),t("td",[s._v("输出没有匹配到的行")])]),s._v(" "),t("tr",[t("td",[s._v("-r")]),s._v(" "),t("td",[s._v("递归的在目录中进行查找")])]),s._v(" "),t("tr",[t("td",[s._v("-A")]),s._v(" "),t("td",[s._v("输出匹配行以及其后 "),t("code",[s._v("x")]),s._v(" 行")])]),s._v(" "),t("tr",[t("td",[s._v("-B")]),s._v(" "),t("td",[s._v("输出匹配行以及其前 "),t("code",[s._v("x")]),s._v(" 行")])]),s._v(" "),t("tr",[t("td",[s._v("-C")]),s._v(" "),t("td",[s._v("输出匹配行以及其前后 "),t("code",[s._v("x")]),s._v(" 行")])]),s._v(" "),t("tr",[t("td",[s._v("--include")]),s._v(" "),t("td",[s._v("只搜索指定的文件")])]),s._v(" "),t("tr",[t("td",[s._v("--exclude")]),s._v(" "),t("td",[s._v("指定不搜索的文件")])])])]),s._v(" "),t("h3",{attrs:{id:"示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),t("p",[s._v("多个文件中查找匹配模式，并打印行号")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" mysql /etc/passwd /etc/shadow /etc/gshadow\n/etc/passwd:27:mysql:x:1112:1112::/home/mysql:/bin/bash\n/etc/shadow:27:mysql:"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$6")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$mNNalvah")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$3CU")]),s._v("/2TcMO5q9.L.Y6H2O7kcuGx1mIPafjgTzgNusTntvZHsydzpkXGdPiU9YVuGlF4g606tie.5tM3aRwYumY/:17701:0:99999:7:::\n/etc/gshadow:45:mysql:"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("::\n")])])]),t("p",[s._v("只输出匹配到的部分")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" this is a line. "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("egrep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[a-z]+\\."')]),s._v("\nline.\n")])])]),t("p",[s._v("列出包含指定模式的文件")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" mysql /etc/passwd /etc/shadow /etc/gshadow\n/etc/passwd\n/etc/shadow\n/etc/gshadow\n")])])]),t("p",[s._v("输出不包含指定模式的行")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" mysql /etc/passwd\nroot:x:0:0:root:/root:/bin/bash\nbin:x:1:1:bin:/bin:/sbin/nologin\ndaemon:x:2:2:daemon:/sbin:/sbin/nologin\nadm:x:3:4:adm:/var/adm:/sbin/nologin\n······\n")])])]),t("p",[s._v("使用开始符 "),t("code",[s._v("^")]),s._v(" 和结束符 "),t("code",[s._v("$")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" ^root /etc/passwd\nroot:x:0:0:root:/root:/bin/bash\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" bash$ /etc/passwd\nroot:x:0:0:root:/root:/bin/bash\nmysql:x:1112:1112::/home/mysql:/bin/bash\n")])])]),t("p",[s._v("去掉文件中的空行和注释，然后输出")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("egrep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'^$|#'")]),s._v(" /etc/passwd\n")])])]),t("p",[s._v("在目录中递归查找")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mysql:'")]),s._v(" /etc/\n/etc/aliases:mysql:     root\n/etc/group:mysql:x:1112:\n/etc/gshadow:mysql:"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("::\n/etc/passwd:mysql:x:1112:1112::/home/mysql:/bin/bash\n/etc/passwd-:mysql:x:1112:1112::/home/mysql:/bin/bash\n/etc/shadow:mysql:"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$6")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$mNNalvah")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$3CU")]),s._v("/2TcMO5q9.L.Y6H2O7kcuGx1mIPafjgTzgNusTntvZHsydzpkXGdPiU9YVuGlF4g606tie.5tM3aRwYumY/:17701:0:99999:7:::\n/etc/shadow-:mysql:"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$6")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$mNNalvah")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$3CU")]),s._v("/2TcMO5q9.L.Y6H2O7kcuGx1mIPafjgTzgNusTntvZHsydzpkXGdPiU9YVuGlF4g606tie.5tM3aRwYumY/:17701:0:99999:7:::\n/etc/group-:mysql:x:1112:\n/etc/gshadow-:mysql:"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("::\n")])])]),t("p",[s._v("递归搜索指定或不指定的文件")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mysql:'")]),s._v(" /etc/ "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--include")]),s._v(" g*\n/etc/group:mysql:x:1112:\n/etc/gshadow:mysql:"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("::\n/etc/group-:mysql:x:1112:\n/etc/gshadow-:mysql:"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("::\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mysql:'")]),s._v(" /etc/ "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--exclude")]),s._v(" g*\n/etc/aliases:mysql:     root\n/etc/passwd:mysql:x:1112:1112::/home/mysql:/bin/bash\n/etc/passwd-:mysql:x:1112:1112::/home/mysql:/bin/bash\n/etc/shadow:mysql:"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$6")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$mNNalvah")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$3CU")]),s._v("/2TcMO5q9.L.Y6H2O7kcuGx1mIPafjgTzgNusTntvZHsydzpkXGdPiU9YVuGlF4g606tie.5tM3aRwYumY/:17701:0:99999:7:::\n/etc/shadow-:mysql:"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$6")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$mNNalvah")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$3CU")]),s._v("/2TcMO5q9.L.Y6H2O7kcuGx1mIPafjgTzgNusTntvZHsydzpkXGdPiU9YVuGlF4g606tie.5tM3aRwYumY/:17701:0:99999:7:::\n")])])]),t("p",[s._v("大小写不敏感查找")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" MySQL /etc/passwd\nmysql:x:1112:1112::/home/mysql:/bin/bash\n")])])]),t("p",[s._v("同时查找多个模式")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mysql'")]),s._v(" /etc/passwd\nroot:x:0:0:root:/root:/bin/bash\noperator:x:11:0:operator:/root:/sbin/nologin\nmysql:x:1112:1112::/home/mysql:/bin/bash\n")])])]),t("p",[s._v("读取文件中的匹配模式，然后查找")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" pattern\n^root\nmysql\nbash$\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" pattern /etc/passwd\nroot:x:0:0:root:/root:/bin/bash\nst-j:x:1000:1000:st-j:/home/st-j:/bin/bash\nnfsuser:x:1111:1111::/home/nfsuser:/bin/bash\nmysql:x:1112:1112::/home/mysql:/bin/bash\n")])])]),t("h2",{attrs:{id:"sed"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sed"}},[s._v("#")]),s._v(" sed")]),s._v(" "),t("h3",{attrs:{id:"官方手册"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#官方手册"}},[s._v("#")]),s._v(" 官方手册")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"http://www.gnu.org/software/sed/manual/sed.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://www.gnu.org/software/sed/manual/sed.html"),t("OutboundLink")],1)])]),s._v(" "),t("h3",{attrs:{id:"常用参数-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用参数-2"}},[s._v("#")]),s._v(" 常用参数")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("参数")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("-n")]),s._v(" "),t("td",[s._v("默认情况下sed处理之后将处理过和没处理过的行都送到stdout，-n选项只发送处理过的行")])]),s._v(" "),t("tr",[t("td",[s._v("-e")]),s._v(" "),t("td",[s._v("支持sed在命令行下的多个脚本动作")])]),s._v(" "),t("tr",[t("td",[s._v("-f")]),s._v(" "),t("td",[s._v("从文件读取sed脚本动作并执行")])]),s._v(" "),t("tr",[t("td",[s._v("-r")]),s._v(" "),t("td",[s._v("让sed支持扩展的正规表达式。(默认是基础正规表示法语法)")])]),s._v(" "),t("tr",[t("td",[s._v("-i")]),s._v(" "),t("td",[s._v("直接修改读取的文件的内容，而不输出到终端")])]),s._v(" "),t("tr",[t("td",[s._v("-i.bak")]),s._v(" "),t("td",[s._v("和-i一样，但是会生成一个.bak的备份文件")])])])]),s._v(" "),t("h3",{attrs:{id:"常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[s._v("#")]),s._v(" 常用命令")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("命令")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("a")]),s._v(" "),t("td",[s._v("在当前行的后面加入一行或者文本。")])]),s._v(" "),t("tr",[t("td",[s._v("c")]),s._v(" "),t("td",[s._v("用新的文本改变或者替代本行的文本。")])]),s._v(" "),t("tr",[t("td",[s._v("d")]),s._v(" "),t("td",[s._v("从pattern space位置删除行。")])]),s._v(" "),t("tr",[t("td",[s._v("i")]),s._v(" "),t("td",[s._v("在当前行的上面插入文本。")])]),s._v(" "),t("tr",[t("td",[s._v("h")]),s._v(" "),t("td",[s._v("拷贝pattern space的内容到holding buffer(特殊缓冲区)。")])]),s._v(" "),t("tr",[t("td",[s._v("H")]),s._v(" "),t("td",[s._v("追加pattern space的内容到holding buffer。")])]),s._v(" "),t("tr",[t("td",[s._v("g")]),s._v(" "),t("td",[s._v("获得holding buffer中的内容，并替代当前pattern space中的文本。")])]),s._v(" "),t("tr",[t("td",[s._v("G")]),s._v(" "),t("td",[s._v("获得holding buffer中的内容，并追加到当前pattern space的后面。")])]),s._v(" "),t("tr",[t("td",[s._v("N")]),s._v(" "),t("td",[s._v("处理奇数行")])]),s._v(" "),t("tr",[t("td",[s._v("n")]),s._v(" "),t("td",[s._v("处理偶数行")])]),s._v(" "),t("tr",[t("td",[s._v("p")]),s._v(" "),t("td",[s._v("打印pattern space中的行。")])]),s._v(" "),t("tr",[t("td",[s._v("P")]),s._v(" "),t("td",[s._v("打印pattern space中的第一行。")])]),s._v(" "),t("tr",[t("td",[s._v("q")]),s._v(" "),t("td",[s._v("退出sed。")])]),s._v(" "),t("tr",[t("td",[s._v("w file")]),s._v(" "),t("td",[s._v("将pattern space中处理的行写到file的末尾。")])]),s._v(" "),t("tr",[t("td",[s._v("!")]),s._v(" "),t("td",[s._v("表示后面的命令对所有没有被选定的行发生作用。")])]),s._v(" "),t("tr",[t("td",[s._v("s/old/string/")]),s._v(" "),t("td",[s._v("用string替换第一个old,支持正则。s/old/string/g当前行内全部替换")])]),s._v(" "),t("tr",[t("td",[s._v("=")]),s._v(" "),t("td",[s._v("打印当前行号码。")])]),s._v(" "),t("tr",[t("td",[s._v("x")]),s._v(" "),t("td",[s._v("互换pattern space和holding buffer中的文本。")])]),s._v(" "),t("tr",[t("td",[s._v("y")]),s._v(" "),t("td",[s._v("把一个字符翻译为另一个字符(但是不能用于正则表达式)。")])])])]),s._v(" "),t("h3",{attrs:{id:"示例-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#示例-2"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),t("p",[s._v("原始文本")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" pets.txt\nThis is my "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v("\n  my "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is betty\nThis is my dog\n  my dog'")]),s._v("s name is frank\nThis is my fish\n  my fish"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is george\nThis is my goat\n  my goat'")]),s._v("s name is adam\n")])])]),t("p",[s._v("搜索并替换每一行的第一个匹配项")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/s/S/'")]),s._v(" pets.txt\nThiS is my "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v("\n  my "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'S name is betty\nThiS is my dog\n  my dog'")]),s._v("S name is frank\nThiS is my fish\n  my fiSh"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is george\nThiS is my goat\n  my goat'")]),s._v("S name is adam\n")])])]),t("p",[s._v("搜索并替换每一行的第二个匹配项")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/s/S/2'")]),s._v(" pets.txt\n")])])]),t("p",[s._v("搜索并替换每一行的第二个到最后一个匹配项")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/s/S/2g'")]),s._v(" pets.txt\n")])])]),t("p",[s._v("搜索并替换所有匹配项，尽量使用 "),t("code",[s._v('"')]),s._v(" ，在 "),t("code",[s._v('"')]),s._v(" 内可以使用 "),t("code",[s._v("\\")]),s._v(" 进行转义，而 "),t("code",[s._v("'")]),s._v(" 不行")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"s/my/your\'s/g"')]),s._v(" pets.txt\n")])])]),t("p",[s._v("给每一行前面都加上 "),t("code",[s._v("#")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/^/#/'")]),s._v(" pets.txt\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#This is my cat")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  my cat's name is betty")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#This is my dog")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  my dog's name is frank")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#This is my fish")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  my fish's name is george")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#This is my goat")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  my goat's name is adam")]),s._v("\n")])])]),t("p",[s._v("从匹配到的行开始，之后连续 "),t("code",[s._v("3")]),s._v(" 行执行搜索替换")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/dog/,+3s/^/# /g'")]),s._v(" pets.txt  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 等同 sed '3,+3s/^/# /g' pets.txt")]),s._v("\nThis is my "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v("\n  my "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is betty\n# This is my dog\n#   my dog'")]),s._v("s name is frank\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# This is my fish")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   my fish's name is george")]),s._v("\nThis is my goat\n  my goat's name is adam\n")])])]),t("p",[s._v("给每一行末尾都加上 "),t("code",[s._v("***")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/$/ *** /'")]),s._v(" pets.txt\n")])])]),t("p",[s._v("替换指定的行")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3s/my/your/g'")]),s._v(" pets.txt\nThis is my "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v("\n  my "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is betty\nThis is your dog\n  my dog'")]),s._v("s name is frank\nThis is my fish\n  my fish"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is george\nThis is my goat\n  my goat'")]),s._v("s name is adam\n\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3,6s/my/your/g'")]),s._v(" pets.txt\nThis is my "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v("\n  my "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is betty\nThis is your dog\n  your dog'")]),s._v("s name is frank\nThis is your fish\n  your fish"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is george\nThis is my goat\n  my goat'")]),s._v("s name is adam\n")])])]),t("p",[s._v("去掉所有 "),t("code",[s._v("HTML")]),s._v(" 标签")]),s._v(" "),t("div",{staticClass:"language-html extra-class"},[t("pre",{pre:!0,attrs:{class:"language-html"}},[t("code",[s._v("$ cat a\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("li")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("a")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("toc-Addresses-overview-1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("href")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("#Addresses-overview"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("4.1 Addresses overview"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("a")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("li")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("li")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("a")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("toc-Selecting-lines-by-numbers"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("href")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("#Numeric-Addresses"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("4.2 Selecting lines by numbers"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("a")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("li")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("li")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("a")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("toc-selecting-lines-by-text-matching"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("href")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("#Regexp-Addresses"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("4.3 selecting lines by text matching"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("a")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("li")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("li")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("a")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("toc-Range-Addresses-1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("href")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("#Range-Addresses"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("4.4 Range Addresses"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("a")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("li")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/<[^>]*>//g'")]),s._v(" a\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.1")]),s._v(" Addresses overview\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.2")]),s._v(" Selecting lines by numbers\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.3")]),s._v(" selecting lines by text matching\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.4")]),s._v(" Range Addresses\n")])])]),t("p",[s._v("使用 "),t("code",[s._v("-i")]),s._v(" 选项直接修改文本中内容")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/s/S/g'")]),s._v(" pets.txt\n")])])]),t("p",[s._v("多个匹配")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1,3s/my/you/g; 4,6s/my/he/g'")]),s._v(" pets.txt\nThis is you "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v("\n  you "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is betty\nThis is you dog\n  he dog'")]),s._v("s name is frank\nThis is he fish\n  he fish"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is george\nThis is my goat\n  my goat'")]),s._v("s name is adam\n")])])]),t("p",[s._v("上面命令等同于")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1,3s/my/you/g'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'4,6s/my/he/g'")]),s._v(" pets.txt\n")])])]),t("p",[s._v("使用变量，在匹配到的文本上追加文本")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/my/[&]/g'")]),s._v(" pets.txt\nThis is "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is betty\nThis is [my] dog\n  [my] dog'")]),s._v("s name is frank\nThis is "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" fish\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" fish"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is george\nThis is [my] goat\n  [my] goat'")]),s._v("s name is adam\n")])])]),t("p",[s._v("使用 "),t("code",[s._v("N")]),s._v(" 命令处理奇数行，原理是将偶数行追加到奇数行后面，然后当成一行进行处理")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'N;s/my/[&]/'")]),s._v(" pets.txt\nThis is "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v("\n  my "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is betty\nThis is [my] dog\n  my dog'")]),s._v("s name is frank\nThis is "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" fish\n  my fish"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is george\nThis is [my] goat\n  my goat'")]),s._v("s name is adam\n")])])]),t("p",[s._v("实际上 "),t("code",[s._v("N")]),s._v(" 命令会将原来文本变成以下形式后再进行处理")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("This is my cat"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("n  my "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is betty\nThis is my dog\\n  my dog'")]),s._v("s name is frank\nThis is my fish"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("n  my fish"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is george\nThis is my goat\\n  my goat'")]),s._v("s name is adam\n")])])]),t("p",[s._v("相对的 "),t("code",[s._v("n")]),s._v(" 命令就是处理偶数行")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'n;s/my/[&]/'")]),s._v(" pets.txt\nThis is my "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is betty\nThis is my dog\n  [my] dog'")]),s._v("s name is frank\nThis is my fish\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" fish"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is george\nThis is my goat\n  [my] goat'")]),s._v("s name is adam\n")])])]),t("p",[s._v("在匹配行之前插入一行")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1i hello world'")]),s._v(" pets.txt\nhello world\nThis is my "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v("\n  my "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is betty\nThis is my dog\n  my dog'")]),s._v("s name is frank\nThis is my fish\n  my fish"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is george\nThis is my goat\n  my goat'")]),s._v("s name is adam\n")])])]),t("p",[s._v("在匹配行之后插入一行")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1a hello world'")]),s._v(" pets.txt\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/frank/a hello world'")]),s._v(" pets.txt\nThis is my "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v("\n  my "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is betty\nThis is my dog\n  my dog'")]),s._v("s name is frank\nhello world\nThis is my fish\n  my fish"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is george\nThis is my goat\n  my goat'")]),s._v("s name is adam\n")])])]),t("p",[s._v("使用 "),t("code",[s._v("c")]),s._v(" 命令替换匹配行")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/frank/c hello world'")]),s._v(" pets.txt\nThis is my "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v("\n  my "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is betty\nThis is my dog\nhello world\nThis is my fish\n  my fish'")]),s._v("s name is george\nThis is my goat\n  my goat's name is adam\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3c hello world'")]),s._v(" pets.txt\n")])])]),t("p",[s._v("使用 "),t("code",[s._v("d")]),s._v(" 命令删除匹配行")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/fish/d'")]),s._v(" pets.txt\nThis is my "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v("\n  my "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is betty\nThis is my dog\n  my dog'")]),s._v("s name is frank\nThis is my goat\n  my goat's name is adam\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3d'")]),s._v(" pets.txt\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3,$d'")]),s._v(" pets.txt\n")])])]),t("p",[s._v("使用 "),t("code",[s._v("p")]),s._v(" 打印匹配行")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3,$p'")]),s._v(" pets.txt\nThis is my dog\n  my dog"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is frank\nThis is my fish\n  my fish'")]),s._v("s name is george\nThis is my goat\n  my goat's name is adam\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/dog/,/fish/p'")]),s._v(" pets.txt\nThis is my dog\n  my dog's name is frank\nThis is my fish\n")])])]),t("p",[s._v("搜索 "),t("code",[s._v("3")]),s._v(" 到 "),t("code",[s._v("6")]),s._v(" 行，然后执行命令")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3,6 {/This/d}'")]),s._v(" pets.txt\nThis is my "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v("\n  my "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is betty\n  my dog'")]),s._v("s name is frank\n  my fish"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is george\nThis is my goat\n  my goat'")]),s._v("s name is adam\n")])])]),t("p",[s._v("搜索 "),t("code",[s._v("3")]),s._v(" 到 "),t("code",[s._v("6")]),s._v(" 行，匹配到 "),t("code",[s._v("This")]),s._v(" 之后再执行里面的命令")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3,6 {/This/{/fish/d}}'")]),s._v(" pets.txt\nThis is my "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v("\n  my "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is betty\nThis is my dog\n  my dog'")]),s._v("s name is frank\n  my fish"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is george\nThis is my goat\n  my goat'")]),s._v("s name is adam\n")])])]),t("p",[s._v("搜索每一行，如果匹配到 "),t("code",[s._v("This")]),s._v(" 就删除，如果前有空格就去除空格")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1,${/This/d;s/^ *//g}'")]),s._v(" pets.txt\nmy "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is betty\nmy dog'")]),s._v("s name is frank\nmy fish"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s name is george\nmy goat'")]),s._v("s name is adam\n")])])]),t("p",[s._v("也可以写成")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/This/d;s/^ *//g'")]),s._v(" pets.txt\n")])])]),t("h2",{attrs:{id:"awk"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#awk"}},[s._v("#")]),s._v(" awk")]),s._v(" "),t("h3",{attrs:{id:"常用参数-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用参数-3"}},[s._v("#")]),s._v(" 常用参数")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("参数")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("-F")]),s._v(" "),t("td",[s._v("指定分隔符")])]),s._v(" "),t("tr",[t("td",[s._v("-v")]),s._v(" "),t("td",[s._v("自定义变量赋值，将外部变量传递给awk")])]),s._v(" "),t("tr",[t("td",[s._v("-f")]),s._v(" "),t("td",[s._v("从文件中读取awk命令")])])])]),s._v(" "),t("h3",{attrs:{id:"常用内置变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用内置变量"}},[s._v("#")]),s._v(" 常用内置变量")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("变量")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("$0")]),s._v(" "),t("td",[s._v("所有字段")])]),s._v(" "),t("tr",[t("td",[s._v("$1")]),s._v(" "),t("td",[s._v("第一个字段")])]),s._v(" "),t("tr",[t("td",[s._v("NR")]),s._v(" "),t("td",[s._v("输入给awk的记录行数，相当于行号")])]),s._v(" "),t("tr",[t("td",[s._v("NF")]),s._v(" "),t("td",[s._v("字段数，相当于当前字段的字段数")])]),s._v(" "),t("tr",[t("td",[s._v("FS")]),s._v(" "),t("td",[s._v("字段分隔符，默认是空格或者制表符")])]),s._v(" "),t("tr",[t("td",[s._v("RS")]),s._v(" "),t("td",[s._v("记录分隔符，每一行为一个记录，默认RS就是换行符")])]),s._v(" "),t("tr",[t("td",[s._v("OFS")]),s._v(" "),t("td",[s._v("输出字段分隔符，可以指定print输出结果所使用的分隔符")])]),s._v(" "),t("tr",[t("td",[s._v("ORS")]),s._v(" "),t("td",[s._v("输出记录分隔符")])])])]),s._v(" "),t("h3",{attrs:{id:"示例-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#示例-3"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),t("p",[s._v("输出指定的列")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ant")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print $1, $4}'")]),s._v("\nActive "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("servers\nProto Local\ntcp "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:111\ntcp "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:22\ntcp "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:25\ntcp "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.20")]),s._v(".20.137:22\ntcp6 :::111\ntcp6 :::22\ntcp6 :::3306\n")])])]),t("p",[s._v("按条件输出")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -ant"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'$3==0 && $6==\"LISTEN\"'")]),s._v("\ntcp        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:111             "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN     \ntcp        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:22              "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN     \ntcp        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:25            "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN     \ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::111                  :::*                    LISTEN     \ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::22                   :::*                    LISTEN     \ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::3306                 :::*                    LISTEN\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -ant"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'$3>0'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3,$p'")]),s._v("\ntcp        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.20")]),s._v(".20.137:22         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.8:1819       ESTABLISHED\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -ant"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NR>=3'")]),s._v("\ntcp        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:111             "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN     \ntcp        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:22              "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN     \ntcp        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:25            "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN     \ntcp        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.20")]),s._v(".20.137:22         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.8:1819       ESTABLISHED\ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::111                  :::*                    LISTEN     \ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::22                   :::*                    LISTEN     \ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::3306                 :::*                    LISTEN\n")])])]),t("p",[s._v("指定输入分隔符和输出分隔符")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -ant"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" -F"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("' '")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NR>2 {print $1,$2,$3}'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("OFS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"#"')]),s._v("\ntcp"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0#0")]),s._v("\ntcp"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0#0")]),s._v("\ntcp"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0#0")]),s._v("\ntcp"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0#52")]),s._v("\ntcp6"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0#0")]),s._v("\ntcp6"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0#0")]),s._v("\ntcp6"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0#0")]),s._v("\n")])])]),t("p",[s._v("匹配字符串后输出")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ $ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -ant"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'$6 ~ /LISTEN/ || NR==2 {print NR,$0}'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("OFS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token entity",title:"\\t"}},[s._v("\\t")]),s._v('"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("   Proto Recv-Q Send-Q Local Address           Foreign Address         State      \n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("   tcp        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:111             "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN     \n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("   tcp        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:22              "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN     \n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("   tcp        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:25            "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN     \n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("   tcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::111                  :::*                    LISTEN     \n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("   tcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::22                   :::*                    LISTEN     \n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("   tcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::3306                 :::*                    LISTEN\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -ant"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/LISTEN/ || NR==2 {print NR,$0}'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("OFS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token entity",title:"\\t"}},[s._v("\\t")]),s._v('"')]),s._v("\n")])])]),t("p",[s._v("匹配字符串然后取反输出")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -ant"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'$6 !~ /LISTEN/ || NR==2 {print NR,$0}'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("OFS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token entity",title:"\\t"}},[s._v("\\t")]),s._v('"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   Active Internet connections "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("servers and established"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("   Proto Recv-Q Send-Q Local Address           Foreign Address         State      \n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("   tcp        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.20")]),s._v(".20.137:22         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.8:1819       ESTABLISHED\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -ant"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'!/LISTEN/ || NR==2 {print NR,$0}'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("OFS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token entity",title:"\\t"}},[s._v("\\t")]),s._v('"')]),s._v("\n")])])]),t("p",[s._v("将输出拆分到文件")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -ant"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NR>=3{print > $6}'")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\nESTABLISHED  LISTEN\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" ESTABLISHED\ntcp        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.20")]),s._v(".20.137:22         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.8:1819       ESTABLISHED\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" LISTEN\ntcp        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:111             "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN     \ntcp        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:22              "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN     \ntcp        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:25            "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN     \ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::111                  :::*                    LISTEN     \ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::22                   :::*                    LISTEN     \ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::3306                 :::*                    LISTEN\n")])])]),t("p",[s._v("也可以指定字段到拆分文件中")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -ant"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NR>=3{print $4,$5 > $6}'")]),s._v("\n")])])]),t("p",[s._v("统计当前目录下所有文件的大小总和")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-lh")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{sum+=$5} END {print sum}'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("136")]),s._v("\n")])])]),t("p",[s._v("统计各个连接状态的数量")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -ant"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NR>2 {a[$6]++;} END {for (i in a) print i \": \" a[i];}'")]),s._v("\nLISTEN: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\nESTABLISHED: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),t("p",[s._v("统计每个用户进程所占用的内存总数")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" aux"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'NR!=1 {a[$1]+=$6;} END {for(i in a) print i ": " a[i]"KB"}\'')]),s._v("\nrpc: 1044KB\nchrony: 1804KB\ndbus: 1832KB\npolkitd: 12008KB\nsmmsp: 2072KB\nmysql: 1103928KB\nroot: 75836KB\n")])])]),t("h2",{attrs:{id:"参考连接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考连接"}},[s._v("#")]),s._v(" 参考连接")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://coolshell.cn/articles/9070.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://coolshell.cn/articles/9070.html"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=e.exports}}]);