(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{231:function(a,t,s){"use strict";s.r(t);var e=s(6),n=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"docker应用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker应用"}},[a._v("#")]),a._v(" Docker应用")]),a._v(" "),t("h2",{attrs:{id:"portainer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#portainer"}},[a._v("#")]),a._v(" Portainer")]),a._v(" "),t("p",[t("strong",[a._v("server")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8000")]),a._v(":8000 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("9443")]),a._v(":9443 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" portainer "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /var/run/docker.sock:/var/run/docker.sock "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /root/u01/portainer/data:/data "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /root/u01/portainer/public:/public "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nportainer/portainer-ce:latest\n")])])]),t("p",[t("strong",[a._v("agent")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("9001")]),a._v(":9001 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" portainer_agent "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /var/run/docker.sock:/var/run/docker.sock "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /var/lib/docker/volumes:/var/lib/docker/volumes "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nportainer/agent:latest\n")])])]),t("h2",{attrs:{id:"qbittorrent"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#qbittorrent"}},[a._v("#")]),a._v(" qbittorrent")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("qbittorrent "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("WEBUIPORT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("82")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("UID")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("UMASK")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("022 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6881")]),a._v(":6881 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6881")]),a._v(":6881/udp "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("82")]),a._v(":82  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /root/u01/qbittorrent/config:/config "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /root/u01/qbittorrent/Downloads:/Downloads "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),a._v(" unless-stopped "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\njohngong/qbittorrent:latest\n")])])]),t("h2",{attrs:{id:"zabbix-agent"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zabbix-agent"}},[a._v("#")]),a._v(" zabbix-agent")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" zabbix-agent "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--network")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("host")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ZBX_HOSTNAME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Zabbix server"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ZBX_SERVER_HOST")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"172.18.0.10"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /etc/localtime:/etc/localtime "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nzabbix/zabbix-agent:alpine-5.0-latest\n")])])]),t("blockquote",[t("p",[a._v("监控本机的时候，ZBX_SERVER_HOST需填zabbix server的容器IP，而非宿主IP，且使用宿主机网络"),t("code",[a._v("--network host")])])]),a._v(" "),t("h2",{attrs:{id:"cloudreve"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cloudreve"}},[a._v("#")]),a._v(" cloudreve")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" cloudreve "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PUID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1000")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PGID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1000")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("TZ")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Asia/Shanghai"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("81")]),a._v(":5212 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("unless-stopped "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /root/u01/cloudreve/uploads:/cloudreve/uploads "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /root/u01/cloudreve/config:/cloudreve/config "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /root/u01/cloudreve/db:/cloudreve/db "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /root/u01/cloudreve/avatar:/cloudreve/avatar "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nxavierniu/cloudreve\n")])])]),t("h2",{attrs:{id:"kodbox"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kodbox"}},[a._v("#")]),a._v(" kodbox")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v(":80 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" kodbox "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /root/u01/kodbox:/var/www/html "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),a._v(" unless-stopped "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nkodcloud/kodbox\n")])])]),t("h2",{attrs:{id:"frp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#frp"}},[a._v("#")]),a._v(" frp")]),a._v(" "),t("p",[t("strong",[a._v("frps")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--network")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("host")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /etc/localtime:/etc/localtime "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /root/u01/frp/frps.ini:/etc/frp/frps.ini "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" frps "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nsnowdreamtech/frps\n")])])]),t("div",{staticClass:"language-ini extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ini"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# frps.ini")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token section"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token section-name selector"}},[a._v("common")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("bind_port")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("7000")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("vhost_http_port")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("7070")]),a._v("\n")])])]),t("p",[t("strong",[a._v("frpc")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--network")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("host")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /etc/localtime:/etc/localtime "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /root/u01/frp/frpc.ini:/etc/frp/frpc.ini "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" frpc "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nsnowdreamtech/frpc\n")])])]),t("div",{staticClass:"language-ini extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ini"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# frpc.ini")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token section"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token section-name selector"}},[a._v("common")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server_addr")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("x.x.x.x")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server_port")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("7000")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token section"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token section-name selector"}},[a._v("web")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("type")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("http")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("custom_domains")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("x.x.x.x")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("local_port")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("84")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token section"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token section-name selector"}},[a._v("ssh")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("type")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("tcp")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("local_ip")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("127.0.0.1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("local_port")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("22")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("remote_port")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("6000")]),a._v("\n")])])]),t("p",[a._v("使用安全的TCP连接")]),a._v(" "),t("div",{staticClass:"language-ini extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ini"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#受访问的内网ssh服务器")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token section"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token section-name selector"}},[a._v("common")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server_addr")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("x.x.x.x")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server_port")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("7000")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token section"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token section-name selector"}},[a._v("secret_ssh")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("type")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("stcp")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("sk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("abc123  #安全访问key")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("local_ip")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("127.0.0.1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("local_port")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("22")]),a._v("\n")])])]),t("div",{staticClass:"language-ini extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ini"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#发起访问请求的客户端PC")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token section"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token section-name selector"}},[a._v("common")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server_addr")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("x.x.x.x")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server_port")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("7000")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token section"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token section-name selector"}},[a._v("secret_ssh_visitor")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("type")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("stcp")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("role")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("visitor")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server_name")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("secret_ssh")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("sk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("abc123  #安全访问key")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("bind_addr")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("127.0.0.1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("bind_port")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("6000")]),a._v("\n")])])]),t("p",[a._v("在Windows上可把frpc做成Windows服务，开机自启动，使用winsw")]),a._v(" "),t("blockquote",[t("p",[a._v("frpc下载地址：https://github.com/fatedier/frp/releases/download/v0.38.0/frp_0.38.0_windows_amd64.zip\nhttps://github.91chifun.workers.dev/https://github.com//fatedier/frp/releases/download/v0.38.0/frp_0.38.0_windows_amd64.zip （加速）")]),a._v(" "),t("p",[a._v("winsw下载地址：https://github.com/winsw/winsw/releases/download/v2.10.3/WinSW.NET4.exe\nhttps://github.91chifun.workers.dev/https://github.com//winsw/winsw/releases/download/v2.10.3/WinSW.NET4.exe （加速）")])]),a._v(" "),t("div",{staticClass:"language-xml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[a._v("#winsw.xml\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("service")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- 该服务的唯一标识 --\x3e")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("frpc"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- 该服务的名称 --\x3e")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("frpc客户端"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- 该服务的描述 --\x3e")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("description")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("frpc客户端 这个服务用 frpc 实现内网穿透"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("description")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- 要运行的程序路径 --\x3e")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("executable")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("D:\\frp_0.38.0_windows_amd64\\frpc.exe"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("executable")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- 携带的参数 --\x3e")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("arguments")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("-c D:\\frp_0.38.0_windows_amd64\\frpc.ini"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("arguments")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- 第一次启动失败 60秒重启 --\x3e")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("onfailure")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("action")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("restart"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("delay")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("60 sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("/>")])]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- 第二次启动失败 120秒后重启 --\x3e")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("onfailure")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("action")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("restart"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("delay")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("120 sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("/>")])]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- 日志模式 --\x3e")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("logmode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("append"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("logmode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- 指定日志文件目录(相对于executable配置的路径) --\x3e")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("logpath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("D:\\frp_0.38.0_windows_amd64\\logs"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("logpath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("service")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])])]),t("p",[a._v("把winsw和winsw.xml放置同一目录下")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("winsw.exe "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#注册服务")]),a._v("\nwinsw.exe uninstall  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#卸载服务")]),a._v("\nwinsw.exe start  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#启动服务")]),a._v("\nwinsw.exe stop  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#停止服务")]),a._v("\nwinsw.exe restart  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#重启服务")]),a._v("\nwinsw.exe status  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#查看状态")]),a._v("\n")])])]),t("p",[a._v("服务启动以后，连接ssh服务器，IP和端口在本机frpc.ini中配置")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ssh")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6000")]),a._v("\n")])])]),t("h2",{attrs:{id:"vsftpd"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vsftpd"}},[a._v("#")]),a._v(" vsftpd")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /root/u01/vsftpd:/home/vsftpd "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("20")]),a._v(":20 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("21")]),a._v(":21 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("21000")]),a._v("-21007:21000-21007 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("FTP_USER")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("rootadmin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("FTP_PASS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Abc@123456 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PASV_ADDRESS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PASV_MIN_PORT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("21100")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PASV_MAX_PORT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("21110")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" vsftpd "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nfauria/vsftpd\n")])])]),t("h2",{attrs:{id:"nginx-rtmp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx-rtmp"}},[a._v("#")]),a._v(" nginx-rtmp")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1935")]),a._v(":1935 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v(":80 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" nginx-rtmp "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nalfg/nginx-rtmp\n")])])]),t("p",[a._v("nginx配置文件位置：/etc/nginx/nginx.conf")]),a._v(" "),t("h2",{attrs:{id:"mosquitto"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mosquitto"}},[a._v("#")]),a._v(" mosquitto")]),a._v(" "),t("p",[a._v("映射文件时需要提前创建")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /root/u01/mosquitto/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("config,data,log"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("touch")]),a._v(" /root/u01/mosquitto/config/mosquitto.conf\n")])])]),t("p",[a._v("配置文件内容 "),t("code",[a._v("mosquitto.conf")])]),a._v(" "),t("div",{staticClass:"language-ini extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ini"}},[t("code",[a._v("persistence true\npersistence_location /mosquitto/data\nlog_dest file /mosquitto/log/mosquitto.log\n\nlistener 1883 \nprotocol mqtt\n\nlistener 1884\nprotocol websockets\n")])])]),t("p",[a._v("启动容器")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" mosquitto "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--privileged")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),a._v(" unless-stopped "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1883")]),a._v(":1883 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1884")]),a._v(":1884 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /root/u01/mosquitto/config/mosquitto.conf:/mosquitto/config/mosquitto.conf "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /root/u01/mosquitto/data:/mosquitto/data "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /root/u01/mosquitto/log:/mosquitto/log "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\neclipse-mosquitto:2\n")])])]),t("p",[a._v("配置账户密码步骤：")]),a._v(" "),t("p",[a._v("1、添加配置 "),t("code",[a._v("mosquitto.conf")])]),a._v(" "),t("div",{staticClass:"language-ini extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ini"}},[t("code",[a._v("allow_anonymous false\npassword_file /mosquitto/config/pwfile.conf\n")])])]),t("p",[a._v("2、进入容器")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" mosquitto "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sh")]),a._v("\n")])])]),t("p",[a._v("3、在容器中创建密码文件")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("touch")]),a._v(" /mosquitto/config/pwfile.conf\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-R")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("755")]),a._v(" /mosquitto/config/pwfile.conf\nmosquitto_passwd "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-b")]),a._v(" /mosquitto/config/pwfile.conf car wwwww\n")])])]),t("p",[a._v("4、重启容器")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" restart mosquitto\n")])])]),t("h3",{attrs:{id:"启用ssl步骤-pem证书"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启用ssl步骤-pem证书"}},[a._v("#")]),a._v(" 启用ssl步骤(pem证书)")]),a._v(" "),t("p",[a._v("1、自签证书")]),a._v(" "),t("p",[a._v("自签ca证书")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("openssl genrsa "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" ca.key "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2048")]),a._v("\nopenssl req "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-x509")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-new")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-nodes")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-key")]),a._v(" ca.key "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sha256")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-days")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3650")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" ca.pem\nYou are about to be asked to enter information that will be incorporated\ninto your certificate request.\nWhat you are about to enter is what is called a Distinguished Name or a DN.\nThere are quite a few fields but you can leave some blank\nFor some fields there will be a default value,\nIf you enter "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'.'")]),a._v(", the field will be left blank.\n-----\nCountry Name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" letter code"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("XX"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(":CN\nstring is too long, it needs to be "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("less")]),a._v(" than  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" bytes long\nCountry Name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" letter code"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("XX"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(":CN\nState or Province Name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("full name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(":HUBEI\nLocality Name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("eg, city"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("Default City"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(":WUHAN\nOrganization Name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("eg, company"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("Default Company Ltd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(":5W\nOrganizational Unit Name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("eg, section"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(":5W    \nCommon Name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("eg, your name or your server's "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("hostname")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(":\nEmail Address "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(":\n")])])]),t("p",[a._v("创建授权私钥")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("openssl genrsa "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" mqtt-client.key "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2048")]),a._v("\n")])])]),t("p",[a._v("新建 "),t("code",[a._v("openssl.cnf")]),a._v(" 文件")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("req"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\ndefault_bits  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2048")]),a._v("\ndistinguished_name "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" req_distinguished_name "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#根据情况修改")]),a._v("\nreq_extensions "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" req_ext\nx509_extensions "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" v3_req\nprompt "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" no\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("req_distinguished_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\ncountryName "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" CN\nstateOrProvinceName "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" HUBEI\nlocalityName "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" WUHAN\norganizationName "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" 5W\ncommonName "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" Server certificate\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("req_ext"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nsubjectAltName "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" @alt_names\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("v3_req"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nsubjectAltName "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" @alt_names\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("alt_names"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nIP.1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".3.28  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#要连接的服务器IP,可以写多个IP")]),a._v("\nIP.2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("120.211")]),a._v(".228.246\nDNS.1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1\n")])])]),t("p",[a._v("以这个密钥和配置签发一个证书请求")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("openssl req "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-new")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-key")]),a._v(" mqtt-client.key "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-config")]),a._v(" openssl.cnf "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" mqtt-client.csr\n")])])]),t("p",[a._v("以根证书来签发实体证书")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("openssl x509 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-req")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" mqtt-client.csr "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-CA")]),a._v(" ca.pem "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-CAkey")]),a._v(" ca.key "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-CAcreateserial")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" mqtt-client.pem "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-days")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3650")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sha256")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-extensions")]),a._v(" v3_req "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-extfile")]),a._v(" openssl.cnf\n")])])]),t("p",[a._v("验证证书")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("openssl verify "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-CAfile")]),a._v(" ca.pem mqtt-client.pem\nmqtt-client.pem: OK\n")])])]),t("p",[a._v("2、拷贝证书")]),a._v(" "),t("p",[a._v("复制 "),t("code",[a._v("ca.pem")]),a._v(" "),t("code",[a._v("mqtt-client.pem")]),a._v(" "),t("code",[a._v("mqtt-client.key")]),a._v(" 到 "),t("code",[a._v("/root/u01/mosquitto/data/ca")]),a._v("下")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" ca.pem mqtt-client.pem mqtt-client.key /root/u01/mosquitto/data/ca\n")])])]),t("p",[a._v("3、修改配置，添加如下配置")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("listener "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1883")]),a._v(" \nprotocol mqtt\n\nlistener "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8883")]),a._v(" \nprotocol mqtt\ncafile /mosquitto/data/ca/ca.pem\ncertfile /mosquitto/data/ca/mqtt-client.pem\nkeyfile /mosquitto/data/ca/mqtt-client.key\nrequire_certificate "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\nuse_identity_as_username "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\n")])])]),t("p",[a._v("如果启用"),t("code",[a._v("8883")]),a._v("端口，需要重新创建容器，加"),t("code",[a._v("-p 8883:8883")]),a._v("配置，也可以使用"),t("code",[a._v("1883")]),a._v("端口配置，添加证书配置")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" mosquitto "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--privileged")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),a._v(" unless-stopped "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1883")]),a._v(":1883 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1884")]),a._v(":1884 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8883")]),a._v(":8883 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /root/u01/mosquitto/config/mosquitto.conf:/mosquitto/config/mosquitto.conf "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /root/u01/mosquitto/data:/mosquitto/data "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /root/u01/mosquitto/log:/mosquitto/log "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\neclipse-mosquitto:2\n")])])]),t("p",[a._v("完整配置")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("persistence "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\npersistence_location /mosquitto/data\nlog_dest "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("file")]),a._v(" /mosquitto/log/mosquitto.log\n\nlistener "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1883")]),a._v(" \nprotocol mqtt\n\nlistener "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1884")]),a._v("\nprotocol websockets\n\nallow_anonymous "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),a._v("\npassword_file /mosquitto/config/pwfile.conf\n\nlistener "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8883")]),a._v(" \nprotocol mqtt\ncafile /mosquitto/data/ca/ca.pem\ncertfile /mosquitto/data/ca/mqtt-client.pem\nkeyfile /mosquitto/data/ca/mqtt-client.key\nrequire_certificate "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\nuse_identity_as_username "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\n")])])]),t("p",[a._v("4、重启容器")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" restart mosquitto\n")])])]),t("p",[a._v("5、客户端连接")]),a._v(" "),t("p",[a._v("启动ssl，配置"),t("code",[a._v("ca.pem")]),a._v(" "),t("code",[a._v("mqtt-client.pem")]),a._v(" "),t("code",[a._v("mqtt-client.key")]),a._v("路径即可")]),a._v(" "),t("p",[a._v("参考：https://www.emqx.com/zh/blog/emqx-server-ssl-tls-secure-connection-configuration-guide")]),a._v(" "),t("h3",{attrs:{id:"启用ssl步骤-crt证书"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启用ssl步骤-crt证书"}},[a._v("#")]),a._v(" 启用ssl步骤(crt证书)")]),a._v(" "),t("p",[a._v("1、生成ca证书")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ openssl genrsa "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-des3")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" ca.key "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2048")]),a._v("\nGenerating RSA private key, "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2048")]),a._v(" bit long modulus\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("+++\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".+++\ne is "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("65537")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("0x10001"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nEnter pass phrase "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" ca.key:\nVerifying - Enter pass phrase "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" ca.key:\n$ openssl req "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-new")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-x509")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-days")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3650")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-key")]),a._v(" ca.key "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" ca.crt\nEnter pass phrase "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" ca.key:\nYou are about to be asked to enter information that will be incorporated\ninto your certificate request.\nWhat you are about to enter is what is called a Distinguished Name or a DN.\nThere are quite a few fields but you can leave some blank\nFor some fields there will be a default value,\nIf you enter "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'.'")]),a._v(", the field will be left blank.\n-----\nCountry Name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" letter code"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("XX"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(":CN\nState or Province Name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("full name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(":HB\nLocality Name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("eg, city"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("Default City"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(":WH\nOrganization Name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("eg, company"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("Default Company Ltd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(":5w\nOrganizational Unit Name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("eg, section"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(":5w\nCommon Name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("eg, your name or your server"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'s hostname) []:\nEmail Address []:\n$ openssl genrsa -out server.key 2048\nGenerating RSA private key, 2048 bit long modulus\n....+++\n.................................................................................................................+++\ne is 65537 (0x10001)\n$ openssl req -new -out server.csr -key server.key\nYou are about to be asked to enter information that will be incorporated\ninto your certificate request.\nWhat you are about to enter is what is called a Distinguished Name or a DN.\nThere are quite a few fields but you can leave some blank\nFor some fields there will be a default value,\nIf you enter '")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("', the field will be left blank.\n-----\nCountry Name (2 letter code) [XX]:CN\nState or Province Name (full name) []:HB\nLocality Name (eg, city) [Default City]:WH\nOrganization Name (eg, company) [Default Company Ltd]:5w\nOrganizational Unit Name (eg, section) []:5w\nCommon Name (eg, your name or your server'")]),a._v("s "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("hostname")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(":\nEmail Address "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(":\n\nPlease enter the following "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'extra'")]),a._v(" attributes\nto be sent with your certificate request\nA challenge password "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(":\nAn optional company name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(":\n$ openssl x509 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-req")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" server.csr "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-CA")]),a._v(" ca.crt "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-CAkey")]),a._v(" ca.key "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-CAcreateserial")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" server.crt "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-days")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3600")]),a._v("\nSignature ok\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("subject")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/C"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("CN/ST"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("HB/L"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("WH/O"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("5w/OU"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("5w\nGetting CA Private Key\nEnter pass phrase "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" ca.key:\n")])])]),t("p",[a._v("2、验证证书")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ openssl verify "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-CAfile")]),a._v(" ca.crt server.crt\nserver.crt: C "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" CN, ST "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" HB, L "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" WH, O "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" 5w, OU "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" 5w\nerror "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("18")]),a._v(" at "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" depth lookup:self signed certificate\nOK\n")])])]),t("p",[a._v("3、如果需要"),t("code",[a._v("pfx")]),a._v("证书，可以用下面命令转换，密码是前面生成证书的密码"),t("code",[a._v("123456")]),a._v("，在使用的时候，也需要这个密码")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ openssl pkcs12 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-clcerts")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" ca.crt "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-inkey")]),a._v(" ca.key "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" ca.pfx\nEnter pass phrase "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" ca.key:\nEnter Export Password:\nVerifying - Enter Export Password:\n$ openssl pkcs12 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-clcerts")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" server.crt "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-inkey")]),a._v(" server.key "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" server.pfx\nEnter Export Password:\nVerifying - Enter Export Password:\n")])])]),t("p",[a._v("对应"),t("code",[a._v("mosquitto")]),a._v("的配置，下面几项需要注释掉")]),a._v(" "),t("div",{staticClass:"language-ini extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ini"}},[t("code",[a._v("listener 8883 \ncafile /mosquitto/data/ca/ca.crt\ncertfile /mosquitto/data/ca/server.crt\nkeyfile /mosquitto/data/ca/server.key\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#protocol mqtt")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#require_certificate true")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#use_identity_as_username true")]),a._v("\n")])])]),t("p",[a._v("连接时可以使用三个文件，或者只使用"),t("code",[a._v("ca.crt")]),a._v("即可")]),a._v(" "),t("h2",{attrs:{id:"redis"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis"}},[a._v("#")]),a._v(" Redis")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" redis "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),a._v(" unless-stopped "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6379")]),a._v(":6379 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /root/u01/redis:/data "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nredis "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--requirepass")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"123456"')]),a._v("\n")])])]),t("h2",{attrs:{id:"mssql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mssql"}},[a._v("#")]),a._v(" mssql")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /root/u01/mssql/data\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("chown")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10001")]),a._v(":root /root/u01/mssql/data\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("unless-stopped "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"ACCEPT_EULA=Y"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"SA_PASSWORD=Abc@123456"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1433")]),a._v(":1433 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" mssql "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--hostname")]),a._v(" mssql "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /root/u01/mssql/data:/var/opt/mssql/data "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" mcr.microsoft.com/mssql/server:2019-latest\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);