(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{263:function(a,s,t){"use strict";t.r(s);var e=t(6),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"aria2-离线下载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#aria2-离线下载"}},[a._v("#")]),a._v(" Aria2 离线下载")]),a._v(" "),s("h2",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),s("p",[a._v("通过 epel 源直接安装")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("yum "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" aria2\n")])])]),s("p",[a._v("安装成功后启动服务, aria2 默认监听在 "),s("code",[a._v("6800")]),a._v(" 端口, "),s("code",[a._v("--rpc-secret")]),a._v(" 是 RPC 秘钥, 需要自行指定, 在 AriaNg 中需要使用它, "),s("code",[a._v("--dir")]),a._v(" 是文件下载路径")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("aria2c --enable-rpc --rpc-listen-all --rpc-allow-origin-all --rpc-secret"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("123")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dir")]),a._v(" /root/downloads "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-D")]),a._v("\n")])])]),s("h2",{attrs:{id:"安装-ariang"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-ariang"}},[a._v("#")]),a._v(" 安装 AriaNg")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/mayswind/AriaNg",target:"_blank",rel:"noopener noreferrer"}},[a._v("AriaNg"),s("OutboundLink")],1),a._v(" 是纯 HTML 和 JavaScript 的程序, 只需要一个 web 服务器即可, 这里用 Nginx , 以下是 Nginx 配置, 将 "),s("code",[a._v("AriaNg-1.0.0.zip")]),a._v(" 下载解压后, 放置到网站根目录 "),s("code",[a._v("html/ariang")]),a._v(" 下即可")]),a._v(" "),s("div",{staticClass:"language-nginx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nginx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("server")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("listen")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("server_name")]),a._v(" example.com")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("access_log")]),a._v(" logs/ariang_access.log main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("location")]),a._v(" /")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("root")]),a._v(" html/ariang")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("index")]),a._v(" index.html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("auth_basic")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Forbbiden"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("auth_basic_user_file")]),a._v(" /home/ec2-user/u01/nginx/conf/htpasswd")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("autoindex")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("on")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[a._v("由于 AriaNg 没有授权认证机制, 这里简单使用 Nginx 的访问认证模块, 通过以下命令创建授权文件 "),s("code",[a._v("/home/ec2-user/u01/nginx/conf/htpasswd")]),a._v(" , 用户名是 "),s("code",[a._v("admin")]),a._v(" , 密码根据命令提示输入")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("htpasswd "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" /home/ec2-user/u01/nginx/conf/htpasswd admin\n")])])]),s("p",[a._v("配置完成后, 通过 "),s("code",[a._v("sudo nginx -s reload")]),a._v(" 重载 Nginx , 然后直接通过 Nginx 中配置的域名或 IP 直接访问,  如 "),s("code",[a._v("http://example.com")])]),a._v(" "),s("p",[a._v("访问成功后, 在 "),s("code",[a._v("AriaNg 设置 -> RPC(example.com...) -> Aria2 RPC 秘钥")]),a._v(" 处填入前面设置的 "),s("code",[a._v("--rpc-secret")]),a._v(" , 然后在 "),s("code",[a._v("Aria2 状态")]),a._v(" 处显示"),s("code",[a._v("已连接")]),a._v(" 即可")]),a._v(" "),s("h2",{attrs:{id:"使用-file-manager"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-file-manager"}},[a._v("#")]),a._v(" 使用 File Manager")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/hacdias/filemanager",target:"_blank",rel:"noopener noreferrer"}},[a._v("File Manager"),s("OutboundLink")],1),a._v(" 是一个在线文件管理系统, 支持上传下载, 文件分享, 授权访问, 在线预览等功能, 将前面 Aria2 的下载路径设置到 File Manager 的根目录下, 实现在线管理离线下载的文件")]),a._v(" "),s("h3",{attrs:{id:"安装-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-2"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-fsSL")]),a._v(" https://filebrowser.xyz/get.sh "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v("\n")])])]),s("p",[a._v("创建 File Manager 的管理目录 "),s("code",[a._v("/root/u01/filemanager")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /root/u01/filemanager\n")])])]),s("p",[a._v("创建配置文件 "),s("code",[a._v("/root/u01/filemanager/config.json")])]),a._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"address"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0.0.0.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"port"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8888")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"database"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/root/u01/filemanager/fm.db"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"root"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/root/u01/filemanager/rootdir"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"log"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/root/u01/filemanager/fs.log"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"allowEdit"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[a._v("通过配置文件启动")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("filebrowser "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" /root/u01/filemanager/config.json "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("\n")])])]),s("p",[a._v("然后只需要在 "),s("code",[a._v("rootdir")]),a._v(" 下创建目录和文件即可, 通过 "),s("code",[a._v("http://IP:8888")]),a._v(" 访问")]),a._v(" "),s("h2",{attrs:{id:"防火墙"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#防火墙"}},[a._v("#")]),a._v(" 防火墙")]),a._v(" "),s("p",[a._v("所有服务配置好以后, 在防火墙上开放 "),s("code",[a._v("6800")]),a._v(" "),s("code",[a._v("80")]),a._v(" "),s("code",[a._v("8888")]),a._v(" 端口")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("iptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-I")]),a._v(" INPUT "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" multiport "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("6800,80")]),a._v(",8888 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);